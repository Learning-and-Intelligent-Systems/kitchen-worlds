<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="css/favicon.ico" />
    <title>Kitchen Worlds - KitchenWorlds</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Kitchen Worlds";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> KitchenWorlds
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Project</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href=".">Kitchen Worlds</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#lisdf-spec">LISDF Spec</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#test-lisdf-pddl-streams-with-pddlstream">Test LISDF + PDDL + Streams with PDDLStream</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#set-up-pddlstream">Set up PDDLStream</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#troubleshooting">Troubleshooting</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#acknowledgements">Acknowledgements</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#todo">TODO</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Domains</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="domain-kitchen/">Kitchen</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Experiments</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="exp-baseline.md">PDDLStream Baseline</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Set it up</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="setup-repository/">Set up the Repository</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="setup-mkdocs/">Set up MkDocs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="setup-notes/">Editor's Notes</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">KitchenWorlds</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Project &raquo;</li><li>Kitchen Worlds</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="kitchen-worlds">Kitchen Worlds<a class="headerlink" href="#kitchen-worlds" title="Permanent link">#</a></h1>
<p>A library of long-horizon Task-and-Motion-Planning (TAMP) problems in kitchen and household scenes, as well as planners to solve them</p>
<ul>
<li>visualize a scene in LISDF format (an extension to SDF that includes URDF)</li>
<li>solve a TAMP problem using PDDLStream defined with a scene.lisdf, problem.pddl, domain.pddl, stream.pddl</li>
<li>procedurally generate scenes with rigid and articulated objects</li>
</ul>
<p><img alt="kitchen_basics.lisdf in PyBullet" src="imgs/kitchen_basics.png" /></p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">#</a></h2>
<p>Grab the <a href="https://github.com/Learning-and-Intelligent-Systems/lisdf">lisdf</a> package:</p>
<pre><code class="language-shell">cd kitchen-worlds
git submodule update --init --recursive
pip install -r requirements.txt
</code></pre>
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">#</a></h2>
<p>To run all tests before git push, do</p>
<pre><code class="language-commandline">cd tests
sh run_tests.sh
</code></pre>
<p>To test basic lisdf functions</p>
<pre><code class="language-commandline">## Test LISDF parser
python test_parse_lisdf.py

## Test load LISDF to Pybullet
python test_pybullet_lisdf.py

##  Test parse problem.pddl
python test_parse_pddl.py
</code></pre>
<p>To solve some test problems wih PDDLStream, <code>-test</code> takes the name of subdirectory inside <code>test_cases</code> folder, e.g. <code>blocks_pick</code>, <code>blocks_kitchen</code>, <code>kitchen</code>:</p>
<pre><code class="language-commandline">python test_pddlstream.py -test blocks_pick
</code></pre>
<p>To build some scenes</p>
<pre><code class="language-commandline">python test_world_builder.py
</code></pre>
<h2 id="lisdf-spec">LISDF Spec<a class="headerlink" href="#lisdf-spec" title="Permanent link">#</a></h2>
<p>Current kitchen scenes in the format of  <code>.lisdf</code> are in path <code>asset/scenes/</code>, e.g. <code>kitchen_counter.lisdf</code> as simulated below. The LISDF format has a few additional tags inside <code>&lt;world&gt;&lt;/world&gt;</code> compared to <a href="http://sdformat.org/spec?ver=1.9&amp;elem=sdf">SDF</a>:</p>
<ul>
<li>add object and robot models with
  <code>xml
  &lt;include&gt;
      &lt;uri&gt;URDF_file&lt;/uri&gt;
      &lt;static&gt;true/false&lt;/static&gt;
      &lt;pose&gt;x y z r p y&lt;/pose&gt;
      &lt;scale&gt; an integer to scale model .obj with original ratio&lt;/scale&gt;
  &lt;/include&gt;</code></li>
<li>describe camera pose in a way that's easy to export from PyBullet</li>
</ul>
<p><code>xml
  &lt;gui&gt;
    &lt;camera name="default_camera" definition_type="lookat"&gt;
      &lt;xyz&gt;3 6 3&lt;/xyz&gt;
      &lt;point_to&gt;0 6 1&lt;/point_to&gt;
    &lt;/camera&gt;
  &lt;/gui&gt;</code>
  apart from what SDF originally supports
  <code>xml
  &lt;gui&gt;
    &lt;camera name="default_camera" definition_type="pose"&gt;
      &lt;pose&gt;3 6 3 0 -2.15 0&lt;/pose&gt;
    &lt;/camera&gt;
  &lt;/gui&gt;</code>
<img alt="kitchen_counter.lisdf in PyBullet" src="imgs/kitchen_counter.png" /></p>
<h2 id="test-lisdf-pddl-streams-with-pddlstream">Test LISDF + PDDL + Streams with PDDLStream<a class="headerlink" href="#test-lisdf-pddl-streams-with-pddlstream" title="Permanent link">#</a></h2>
<h3 id="set-up-pddlstream">Set up PDDLStream<a class="headerlink" href="#set-up-pddlstream" title="Permanent link">#</a></h3>
<pre><code class="language-commandline"># git submodule add https://github.com/caelan/pddlstream.git
cd pddlstream
git submodule update --init --recursive  ## may take a few minutes
./downward/build.py ## may take a few minutes

cd examples/pybullet/utils
git pull origin master
cd motion
git pull origin master
</code></pre>
<h3 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">#</a></h3>
<pre><code>File &quot;/Users/z/Documents/simulators/PyBullet/kitchen-worlds/pddlstream/examples/pybullet/utils/pybullet_tools/utils.py&quot;, line 3572, in get_closest_points
    return [CollisionInfo(*info) for info in results]
TypeError: 'NoneType' object is not iterable
</code></pre>
<h2 id="acknowledgements">Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permanent link">#</a></h2>
<p>This repo works thanks for the tools provided by LIS lab members and alum:</p>
<ul>
<li>the <a href="https://github.com/caelan/pybullet-planning/tree/master/pybullet_tools">pybullet_tools</a> package is an awesome set of tools developed by Caelan Garret. A forked version is included with my own helper functions.</li>
<li>the <a href="https://github.com/caelan/pddlstream">pddlstream</a> is a planning framework developed by Caelan Garret.</li>
<li>the <a href="https://github.com/Learning-and-Intelligent-Systems/lisdf">lisdf</a> package is an input/output specification for TAMP problems developed by William Shen, Nishanth Kumar, Aidan Curtis, and Jiayuan Mao.</li>
</ul>
<p>All the object models and urdf files are downloaded for free from the following sources:</p>
<ul>
<li>most articulated object models are downloaded from <a href="https://sapien.ucsd.edu/browse">PartNet Mobility dataset</a> (Mo, Kaichun, et al. "Partnet: A large-scale benchmark for fine-grained and hierarchical part-level 3d object understanding." <em>Proceedings of the IEEE/CVF conference on computer vision and pattern recognition</em>. 2019.)</li>
<li>most kitchen object models are downloaded from <a href="https://free3d.com/3d-models/food">Free3D</a>.</li>
</ul>
<h2 id="todo">TODO<a class="headerlink" href="#todo" title="Permanent link">#</a></h2>
<ul>
<li>[x] add <code>requirements.txt</code></li>
<li>[x] upload test scene files in the format of <code>.lisdf</code> -&gt; need lisdf team to support a few more tags, including
  <code>xml
  &lt;include&gt;&lt;uri&gt;...&lt;/uri&gt;&lt;/include&gt;
  &lt;state&gt;...&lt;/state&gt;</code></li>
<li>[x] upload test scene files with <code>&lt;world&gt;&lt;gui&gt;&lt;camera&gt;&lt;pose&gt;</code></li>
<li>[x] update problem files in the format of <code>problem.pddl</code></li>
<li>[x] upload implicit domain files in the format of <code>domain.pddl</code></li>
<li>[x] add instructions to solve the example problems with TAMP planner <a href="https://github.com/caelan/pddlstream/tree/main">PDDLStream</a></li>
<li>
<p>[x] add instructions on generating kitchen scenes with scripts in <a href="https://github.mit.edu/ztyang/cognitive-architectures/tree/master/bullet">cognitive-architectures</a></p>
</li>
<li>
<p>[ ]</p>
</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="domain-kitchen/" class="btn btn-neutral float-right" title="Kitchen">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="domain-kitchen/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
